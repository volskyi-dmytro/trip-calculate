# application-prod.properties
# Production environment configuration

# Server
server.port=8080

# Database (will be overridden by environment variables)
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}

# JPA - STRICT VALIDATION IN PRODUCTION
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# OAuth2
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.redirect-uri=${OAUTH_REDIRECT_URI}
spring.security.oauth2.client.registration.google.scope=profile,email

# Session
spring.session.store-type=jdbc
spring.session.jdbc.initialize-schema=always
server.servlet.session.timeout=24h

# Security - Strict settings for production
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-exception=false

# Logging (minimal for production)
logging.level.root=WARN
logging.level.com.tripplanner=INFO

# Actuator - Limited endpoints in production
management.endpoints.web.exposure.include=health,prometheus
management.endpoint.health.show-details=when-authorized

# ========================================
# AI Configuration (Production)
# ========================================
# Cache implementation: Use Redis for production
spring.cache.type=redis
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.cache.redis.time-to-live=86400000

# Redis connection pool configuration (Lettuce)
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=-1ms

# Logging: Production level for AI services
logging.level.com.tripplanner.TripPlanner.filter.AiRateLimitingFilter=INFO
logging.level.com.tripplanner.TripPlanner.service.AiCacheService=INFO
logging.level.com.tripplanner.TripPlanner.service.AiUsageService=INFO
logging.level.com.tripplanner.TripPlanner.controller.AiInsightsController=INFO